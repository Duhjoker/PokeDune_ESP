#ifndef _Variables_H_
#define _Variables_H_

#include "EEPROM.h"
#include "Adafruit_seesaw.h"
#include <elapsedMillis.h>
//#include "Inventory.h"

extern Grafx_esp tft;

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////Game State///////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#define STATE_Title          0
#define STATE_Game_select    1
#define STATE_Player         2
#define STATE_Menu           3
#define STATE_Item_list      4
#define STATE_Battle         5
#define STATE_Item_list_bat  6
#define STATE_Save_game      7


byte state = STATE_Title;
byte nextState = STATE_Game_select;
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////Cursors////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
struct CursorA
{
  int cursorA_x;
  int cursorA_y;
  int cursor_direction;
};

CursorA cursora = { 0, 27, 1};
///////////////////////////////////////////////////////////////////////////////////////////
struct CursorB
{
  int cursorB_x;
  int cursorB_y;
  int cursorB_direction;
};

CursorB cursorb = { 9, 138, 1};
///////////////////////////////////////////////////////////////////////////////////////////
struct CursorC
{
  int cursorC_x;
  int cursorC_y;
  int cursor_direction;
};

CursorC cursorc = { 68, 94, 1};
///////////////////////////////////////////////////////////////////////////////////////////
struct CursorD
{
  int cursorD_x;
  int cursorD_y;
  int cursor_direction;
};

CursorD cursord = { 68, 94, 1};
///////////////////////////////////////////////////////////////////////////////////////////
struct CursorE
{
  int cursorE_x;
  int cursorE_y;
  int cursor_direction;
};

CursorE cursore = { 142, 14, 1};
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////Inventory///////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#define ITEM_Spice          0
#define ITEM_Water          1
#define ITEM_Ring           2
#define ITEM_Crysknife      3
#define ITEM_Thumper        4
#define ITEM_Glowglobe      5
#define ITEM_Stilltent      6
#define ITEM_Abba           7
#define ITEM_Stillsuit      8
#define ITEM_Fremkit        9

#define NoItem              255
#define MaxChests           2

#define MAX_ITEM            10
#define SLOT_AVAILABLE      255
#define NO_SLOT_AVAILABLE   254
#define NUMBER_OF_SLOTS     12

struct Slot {
  int slot_x;
  int slot_y;
  int slot_w;
  int slot_h;
  uint8_t itemId;
  uint8_t quantity;
};

Slot slots[NUMBER_OF_SLOTS] = {
  { 180, 16,  81, 16, SLOT_AVAILABLE},
  { 180, 34,  81, 16, SLOT_AVAILABLE},
  { 180, 52,  81, 16, SLOT_AVAILABLE},
  { 180, 70,  81, 16, SLOT_AVAILABLE},
  { 180, 88,  81, 16, SLOT_AVAILABLE},
  { 180, 106, 81, 16, SLOT_AVAILABLE},
  { 180, 124, 81, 16, SLOT_AVAILABLE},
  { 180, 142, 81, 16, SLOT_AVAILABLE},
  { 180, 160, 81, 16, SLOT_AVAILABLE},
  { 180, 178, 81, 16, SLOT_AVAILABLE},
  { 180, 196, 81, 16, SLOT_AVAILABLE},
  { 180, 214, 81, 16, SLOT_AVAILABLE},
};
///////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////
class Chest
  {
  public:
    uint16_t w;
    uint16_t h;
    uint8_t itemId;
    bool isOpen;
  };

  #define NoItem 255

  Chest chests[] =
  {
  {16, 16, ITEM_Spice, false },
  {16, 16, ITEM_Spice, false },
  };
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////Camera////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Camera speed in pixels per update
int cameraXSpeed = 3;
int cameraYSpeed = 3;
///////////////////////////////////////////////////////////////////////////////////////////
// Camera offset boundaries
int cameraXMin = -336;   /////// -320 0f total tilemap pixels x right >>>>
int cameraXMax = 0;
int cameraYMin = -448;   /////// -256 0f total tilemap pixels y down VVVV
int cameraYMax = 0;
///////////////////////////////////////////////////////////////////////////////////////////
// Player offset boundaries allows camera to scroll when player moves to boundary
int playerXMin = 80;    //////// do not change if resolution of tft is 320x240
int playerXMax = 240;
int playerYMin = 80;
int playerYMax = 168;
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////Buttons /////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
Adafruit_seesaw ss1;
Adafruit_seesaw ss2;
////////////////////////////////////////////////////////////////////////////
#define IRQ_PIN1   13
#define IRQ_PIN2   27
////////////////////////////////////////////////////////////////////////////
int last_x = 0, last_y = 0;
int last_x2 = 0, last_y2 = 0;
////////////////////////////////////////////////////////////////////////////
#define BUTTON_RIGHT 6  /////////////what are these integers
#define BUTTON_DOWN  7  /////////////"                      "
#define BUTTON_LEFT  9  /////////////"                      "
#define BUTTON_UP    10 /////////////"                      "
#define BUTTON_SEL   14 /////////////"                      "
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
#define BUTTON_A      6  /////////////what are these integers
#define BUTTON_B      7  /////////////"                      "
#define BUTTON_Y      9  /////////////"                      "
#define BUTTON_X      10 /////////////"                      "
#define BUTTON_START  14 /////////////"                      "
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
uint32_t button_mask = (1 << BUTTON_RIGHT) | (1 << BUTTON_DOWN) |
                       (1 << BUTTON_LEFT) | (1 << BUTTON_UP) | (1 << BUTTON_SEL);
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
uint32_t button_mask2 = (1 << BUTTON_A) | (1 << BUTTON_B) |
                        (1 << BUTTON_Y) | (1 << BUTTON_X) | (1 << BUTTON_START);
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////                        
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////Pixel Color Includes//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
uint16_t palette[16];  // Should probably be 256, but I don't use many colors...
uint16_t pixel_data[2500];

//Extra integers for color palette
int a = 0xa; int b = 0xb; int c = 0xc;
int d = 0xd; int e = 0xe; int f = 0xf;
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////Player///////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
struct Player
{
  int player_x;
  int player_y;
  int w;
  int h;
  int room;
  int cameraX;
  int cameraY;
  int player_direction;
  int player_directionRepeat;
};

  Player player = { 160, 170, 16, 16, 3, -128, -254, 2, 0};
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////Battle/////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
struct Monster {
  int x;
  int y;
  int cursor_x;
  int cursor_y;
  int health;
  int attack;
  int defense;
  uint8_t MonId;
  const uint16_t *pixels;
  };
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
#define MONSTER_Cave_spider          0
#define MONSTER_Desert_bat           1
#define MONSTER_Desert_hare          2
#define MONSTER_Desert_scorpion      3
#define MONSTER_Desert_slig          4
#define MONSTER_Face_dancer          5
#define MONSTER_Outcast              6
#define MONSTER_Kangaroo_mouse       7
#define MONSTER_Laza_tiger           8
#define MONSTER_Sandworm             9
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
Monster monster[] = {
  {143, 50, 90, 94, 25,  8, 10, 0},
  {143, 50, 90, 94, 30, 10,  7, 1},
  {143, 50, 90, 94, 40,  7,  6, 2},
  {143, 50, 90, 94, 45, 11, 20, 3},
  {143, 50, 90, 94, 50, 12, 18, 4},
  {143, 50, 90, 94, 60, 14, 20, 5},
  {143, 50, 90, 94, 60, 16, 10, 6},
  {143, 50, 90, 94, 25,  8, 10, 7},
  {143, 50, 90, 94, 70, 20, 20, 8},
  {143, 50, 90, 94, 80, 25, 40, 9},
 };
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
const char * getMonName(uint8_t monId)
  {
  switch (monId)
  {
    case 0: return "Cave Spider";
    case 1: return "Desert Bat";
    case 2: return "Desert Hare";
    case 3: return "Desert Scorpion";
    case 4: return "Desert Slig";
    case 5: return "Face Dancer";
    case 6: return "Outcast";
    case 7: return "Kangaroo Mouse";
    case 8: return "Laza Tiger";
    case 9: return "Sand Worm";
  }
  }
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////Progress////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
int addr = 0;
#define EEPROM_SIZE 64  

void save()
{
  EEPROM.put(0, player);
  EEPROM.put(36, slots);
  EEPROM.commit();
  Serial.println(player.player_x);
  Serial.println(player.player_y);
  Serial.println(player.w);
  Serial.println(player.h);
  Serial.println(player.cameraX);
  Serial.println(player.cameraY);
  Serial.println(player.player_direction);
  Serial.println(player.player_directionRepeat);
  Serial.print("saved");
}

void load()
{
    EEPROM.get(0, player);
    EEPROM.get(36, slots);
  Serial.println(player.player_x);
  Serial.println(player.player_y);
  Serial.println(player.w);
  Serial.println(player.h);
  Serial.println(player.cameraX);
  Serial.println(player.cameraY);
  Serial.println(player.player_direction);
  Serial.println(player.player_directionRepeat);
}

#endif
