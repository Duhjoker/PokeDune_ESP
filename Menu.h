#ifndef _Menu_H_
#define _Menu_H_

#include "Variables.h"
#include "Player.h"
#include "World.h"
#include "Inventory.h"

///////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////
struct CursorA
{
  int cursorA_x;
  int cursorA_y;
  int cursor_direction;
};

CursorA cursora = { 17, 31, 1};
////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////
void Menu() {
  //////////////////////////////////////////////////////////////////////////////
  ///////////////////////////////Palette////////////////////////////////////////
  //////////////////////////////////////////////////////////////////////////////
  palette[0] = 0;
  palette[1] = BLACK;
  palette[2] = BLUE;
  palette[3] = BROWN;
  palette[4] = DARKGREEN;
  palette[5] = GREY;
  palette[6] = PINK;
  palette[7] = RED;
  //////////////////////////////////////////////////////////////////////////////
  //////////////////////////////////////////////////////////////////////////////
  palette[8] = BEIGE;
  palette[9] = GREEN;
  palette[a] = DARKGREY;
  palette[b] = LIGHTGREY;
  palette[c] = YELLOW;
  palette[d] = PURPLE;
  palette[e] = WHITE;
  palette[f] = ORANGE;
  //////////////////////////////////////////////////////////////////////////////
  //////////////////////////////////////////////////////////////////////////////
  Rect rectA {0, 0, 136, 20};
  Rect rectB {0, 20, 136, 40};
  Rect rectC {0, 60, 136, 40};
  Rect rectD {0, 100, 136, 40};
  Rect rectE {0, 140, 136, 40};
  Rect rectF {0, 180, 136, 40};
  Rect rectG {0, 220, 136, 20};
  Rect rectH {cursora.cursorA_x, cursora.cursorA_y, 16, 16};
  /////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////
  tft.writeRectNBPP(0, 0, 136, 20, 4, menul1, palette);
  tft.writeRectNBPP(0, 20, 136, 40, 4, menul2, palette);
  tft.writeRectNBPP(0, 60, 136, 40, 4, menul3, palette);
  tft.writeRectNBPP(0, 100, 136, 40, 4, menul4, palette);
  tft.writeRectNBPP(0, 140, 136, 40, 4, menul5, palette);
  tft.writeRectNBPP(0, 180, 136, 40, 4, menul6, palette);
  tft.writeRectNBPP(0, 220, 136, 20, 4, menul7, palette);
  tft.writeRectNBPP(136, 0, 184, 26, 4, menur1, palette);
  tft.writeRectNBPP(136, 26, 184, 16, 4, menur2, palette);
  tft.writeRectNBPP(136, 42, 184, 16, 4, menur2, palette);
  tft.writeRectNBPP(136, 58, 184, 16, 4, menur2, palette);
  tft.writeRectNBPP(136, 74, 184, 16, 4, menur2, palette);
  tft.writeRectNBPP(136, 90, 184, 16, 4, menur2, palette);
  tft.writeRectNBPP(136, 106, 184, 16, 4, menur2, palette);
  tft.writeRectNBPP(136, 122, 184, 16, 4, menur2, palette);
  tft.writeRectNBPP(136, 138, 184, 16, 4, menur2, palette);
  tft.writeRectNBPP(136, 154, 184, 16, 4, menur2, palette);
  tft.writeRectNBPP(136, 170, 184, 16, 4, menur2, palette);
  tft.writeRectNBPP(136, 186, 184, 16, 4, menur2, palette);
  tft.writeRectNBPP(136, 202, 184, 16, 4, menur2, palette);
  tft.writeRectNBPP(136, 218, 184, 22, 4, menur3, palette);
  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////
  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////
  int y = ss1.analogRead(2);
  int x = ss1.analogRead(3);

  /// if(tft.Bpressed(BTN_UP)){
  if (x > 600 && last_x < 600) {
    tft.writeRectNBPP(cursora.cursorA_x, cursora.cursorA_y, 16, 16, 4, cursordot2, palette);
    cursora.cursor_direction = 1;
    cursora.cursorA_y -= 40;
  }
  if (cursora.cursorA_y <= 30) {
    cursora.cursorA_y = 30;
  }

  //////////////////////////////////////////////////////////////////////////////
  ///////////////////////////////Down///////////////////////////////////////////
  //////////////////////////////////////////////////////////////////////////////
  /// if(tft.Bpressed(BTN_DOWN)){
  if (x < 400 && last_x > 400) {
    tft.writeRectNBPP(cursora.cursorA_x, cursora.cursorA_y, 16, 16, 4, cursordot2, palette);
    cursora.cursor_direction = 1;
    cursora.cursorA_y += 40;
  }
  if (cursora.cursorA_y >= 192) {
    cursora.cursorA_y = 192;
  }

  last_x = x;
  /////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////
  if (cursora.cursor_direction == 1) {
    tft.writeRectNBPP(cursora.cursorA_x, cursora.cursorA_y, 16, 16, 4, cursordot2, palette);
  }

  //////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////exit menu////////////////////////////////////
  //////////////////////////////////////////////////////////////////////////////
  if (!digitalRead(IRQ_PIN2)) {
    uint32_t buttons = ss2.digitalReadBulk(button_mask2);
    if (! (buttons & (1 << BUTTON_A))) {
      state = STATE_Player;
    }
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////

    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////

    if ((! (buttons & (1 << BUTTON_X)) && tft.collideRectRect( rectB.x, rectB.y, rectB.width, rectB.height, rectH.x, rectH.y, rectH.width, rectH.height)))
    {
     state = STATE_Item_list;
    }
    else if ((! (buttons & (1 << BUTTON_X))  && tft.collideRectRect( rectC.x, rectC.y, rectC.width, rectC.height, rectH.x, rectH.y, rectH.width, rectH.height)))
    {
      tft.fillScreen(GREEN);
    }
    else if ((! (buttons & (1 << BUTTON_X)) && tft.collideRectRect( rectD.x, rectD.y, rectD.width, rectD.height, rectH.x, rectH.y, rectH.width, rectH.height)))
    {
      tft.fillScreen(RED);
    }
    else if ((! (buttons & (1 << BUTTON_X)) && tft.collideRectRect( rectE.x, rectE.y, rectE.width, rectE.height, rectH.x, rectH.y, rectH.width, rectH.height)))
    {
      tft.fillScreen(YELLOW);
    }
    else if ((! (buttons & (1 << BUTTON_X)) && tft.collideRectRect( rectF.x, rectF.y, rectF.width, rectF.height, rectH.x, rectH.y, rectH.width, rectH.height)))
    {
      tft.fillScreen(WHITE);
    }
  }
}
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#endif

